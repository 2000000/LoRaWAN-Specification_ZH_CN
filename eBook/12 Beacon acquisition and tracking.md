## 第12章 信标的获得和追踪

在从Class A切换到Class B之前，终端必须首先接收一个网络的信标来将它自身的时间基准与网络时间进行校准。

一旦处于Class B模式，终端必须定期地去搜索并且接收一个网络信标去消除任何自身内部基准时间相对于网络时间的任何漂移。

一个Class B模式的设备也许会短暂性地无法接收信标(超出与网关的通信范围，存在干扰，...）在这种情况之下，终端必须逐步地加大信标和ping时隙的接收窗口时间，以考虑它的内部时钟所可能产生的漂移。

> 例如，一个设备精度为10ppm的内部时钟每个信标周期(128s)就会有+/-1.3ms的漂移。

### <a name="12.1">12.1 最小beacon-less操作时间</a>
在信标丢失的情况之下，一个终端需要在接收到最后一个信标节点时间开始算起保持2小时的Class B操作。这种短暂的没有信标的Class B操作就称之为“beacon-less”操作。这种情况之下就需要依赖终端自己的时钟来保持时间。

在“beacon-less”的情况下，单播、多播还有信标接收时隙都必须逐步地扩大接收窗口时间以容纳终端可能的时钟漂移。

![](Pictures/beacon-less_temporary_operation.png)

### <a name="12.2">12.2 在beacon-less操作期间的接收拓展</a>
在120分钟的时间间隔之内，一旦终端接收到任何信标，就需要将Class B的“beacon-less”操作进一步延长120分钟，因为它允许校正任何时间漂移和重置接收时隙持续时间。

### <a name="12.3">12.3 时序漂移最小化</a>
终端可能会使用信标的准确周期(当信标可用时)去校准他们的初始化时钟，因此可以减少初始化时钟频率的不准确性。由于定时振荡器会表示出可预知的温度频移，因此使用一个温度传感器可以使时间漂移进一步地最小化。