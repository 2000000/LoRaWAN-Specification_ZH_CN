

# **第1章 介绍**

本文档描述了LoRaWAN网络协议，是针对电池供电的终端设备(不管移动还是固定位置)进行优化的一套网络协议。

LoRaWAN网络通常采用星型拓扑结构，由拓扑中的**网关**来转发**终端**与后台**网络服务器**间的消息。**网关**通过标准IP连接来接入**网络服务器**，而**终端**则通过单跳的 LoRa 或者 FSK 来和一个或多个**网关**通讯。虽然主要传输方式是**终端**上行传输给**网络服务器**，但所有的传输通常都是双向的。

终端和网关间的通讯被分散到不同的信道频点和数据速率上。数据速率的选择需要权衡距离和消息时长两个因素，使用不同数据速率的设备互不影响。LoRa的数据速率范围可以从 0.3kbps 到 50kbps。为了最大程度地延长终端的电池寿命和扩大网络容量，LoRa网络使用速率自适应(ADR)机制来独立管理每个终端的速率和RF输出。

虽然每个设备可以在任意信道，任意时间，发送任意数据，但需要注意遵守如下规定：

- 终端的每次传输都使用伪随机方式来改变信道。频率的多变使得系统具有更强的抗干扰能力。
- 终端要遵守相应频段和本地区的无线电规定中的发射占空比要求。
- 终端要遵守相应频段和本地区的无线电规定中的发射时长要求。

> twowinter注：发射占空比，意思是发射时长占总时长的比例。按照无线电规定，每个设备不能疯狂发射霸占信道，总得给别人一点机会。


这份文档主要讲述协议细节，一些基于各地区规定的操作参数，例如发射占空比和发射时长等，在另一份文档[LoRaWAN地区参数]中做具体描述。将这份文档分开，是为了加入新地区参数时不影响基础的协议规范。

## [1.1 LoRaWAN Classes](id:1.1)

所有的LoRaWAN设备都必须至少实现本文档描述的 Class A 功能。另外也可以实现本文档中描述的 Class B 和 Class C 及后续将定义的可选功能。不管怎么样，设备都必须兼容 Class A。

## [1.2 文档约定](id:1.2)

MAC命令的格式写作 ***LinkCheckReq*** (粗斜体)，位和位域的格式写作 **FRMPayload** (粗体)，常量的格式写作 RECEIVE_DELAY1，变量的格式写作 N。

在本文档中，

- 所有多字节字段的字节序均采用小端模式
- EUI 是8字节字段，采用小端模式传输
- 默认所有RFU保留位都设为0

